<div class="book-list-container">
  <h2>Liste des Livres</h2>

  <div class="controls">
    <div class="search-box">
      <label for="search">Rechercher:</label>
      <input
        type="text"
        id="search"
        name="search"
        [(ngModel)]="searchTerm"
        placeholder="Rechercher par titre, auteur ou catégorie..."
      />
    </div>

    <div class="sort-box">
      <label for="sortBy">Trier par:</label>
      <select id="sortBy" name="sortBy" [(ngModel)]="sortBy">
        <option value="">-- Sans tri --</option>
        <option value="category">Catégorie</option>
        <option value="availability">Disponibilité</option>
      </select>
    </div>

    <div class="book-counter">
      <strong>Total: {{ totalBooks }} livre(s)</strong>
    </div>
  </div>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Titre</th>
          <th>Auteur</th>
          <th>Catégorie</th>
          <th>Disponible</th>
          <th>Stock</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (book of filteredBooks; track book.id) {
        <tr>
          <td>{{ book.title }}</td>
          <td>{{ book.author }}</td>
          <td>{{ book.category }}</td>
          <td>
            <span [class]="book.isAvailable ? 'badge-available' : 'badge-unavailable'">
              {{ book.isAvailable ? 'Oui' : 'Non' }}
            </span>
          </td>
          <td>{{ book.stock ?? 'N/A' }}</td>
          <td class="actions">
            <button class="btn-edit" (click)="onEdit(book)">Modifier</button>
            <button class="btn-delete" (click)="onDelete(book.id)">Supprimer</button>
          </td>
        </tr>
        } @empty {
        <tr>
          <td colspan="6" class="no-data">Aucun livre trouvé</td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>
